# Бот для розыгрыша в Telegram канале

Этот бот позволяет проводить розыгрыши среди подписчиков Telegram канала.

## Возможности
- Создание постов с кнопкой "Участвую"
- Проверка подписки участников на канал
- Проведение розыгрыша среди подписчиков
- Объявление победителя

## Установка и настройка

### Стандартная установка

1. Клонируйте репозиторий:
```
git clone https://github.com/yourusername/raffle-bot.git
cd raffle-bot
```

2. Установите зависимости:
```
pip install -r requirements.txt
```

3. Создайте бота в Telegram через [@BotFather](https://t.me/BotFather) и получите токен

4. Создайте файл `.env` на основе `.env.example` и заполните его:
```
BOT_TOKEN=ваш_токен_бота
CHANNEL_USERNAME=имя_вашего_канала_с_@
```

5. Добавьте бота в администраторы вашего канала

6. Запустите бота:
```
python main.py
```

### Установка на NAS Synology с использованием Docker

1. Убедитесь, что на вашем NAS установлен Docker
   - Откройте Package Center на Synology DSM
   - Найдите и установите Docker

2. Клонируйте репозиторий на NAS или загрузите файлы через File Station.

3. Создайте файл `.env` на основе `.env.example` и заполните его данными:
```
BOT_TOKEN=ваш_токен_бота
CHANNEL_USERNAME=имя_вашего_канала_с_@
```

4. Подключитесь к NAS через SSH или используйте терминал Docker из DSM:

   **Вариант 1**: Использование Docker Compose (рекомендуется):
   ```
   cd /путь/к/папке/raffle-bot
   docker-compose up -d
   ```

   **Вариант 2**: Использование Docker напрямую:
   ```
   cd /путь/к/папке/raffle-bot
   docker build -t raffle-bot .
   docker run -d --name raffle-bot --restart always -v $(pwd)/data:/app/data -v $(pwd)/.env:/app/.env raffle-bot
   ```

5. Проверьте, что контейнер запущен:
   ```
   docker ps
   ```

### Управление Docker-контейнером

- Остановка бота:
  ```
  docker stop raffle-bot
  ```

- Запуск остановленного бота:
  ```
  docker start raffle-bot
  ```

- Просмотр логов:
  ```
  docker logs raffle-bot
  ```

- Просмотр логов в реальном времени:
  ```
  docker logs -f raffle-bot
  ```

## Использование

1. Для создания розыгрыша отправьте команду `/create_raffle` боту
2. Настройте параметры розыгрыша (текст, дата окончания)
3. Бот создаст пост с кнопкой "Участвую"
4. По окончании розыгрыша отправьте команду `/draw_winner` чтобы определить победителя 